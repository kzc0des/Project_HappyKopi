<div class="card-container">
  <div (click)="toggleCard()" class="arrow-button">
    <svg
      [class.rotate-180]="expanded"
      xmlns="http://www.w3.org/2000/svg"
      width="28"
      height="10"
      viewBox="0 0 28 10"
      fill="none"
      class="arrow-icon"
    >
      <path
        d="M1.5 1.50049L14 8.50049L26.5 1.50049"
        stroke="#777777"
        stroke-width="3"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  </div>

  <div class="card-wrapper">
    @if (expanded) {
    <div class="card-content-wrapper">
      <div class="card-expanded">
        <div class="order-header">
          <div>
            <div class="order-number">Current Order</div>
            <div class="order-quantity">{{ oqv.OrderQuantity }} Drinks</div>
          </div>
          <div class="order-total">
            {{ oqv.OrderTotal | currency : 'PHP' }}
          </div>
        </div>

        <div class="actions-container">
          <!-- Undo Button -->
          <div
            class="action-button"
            [class.disabled]="!canUndo"
            (click)="canUndo && undo()"
            [title]="canUndo ? 'Undo last action' : 'No actions to undo'"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
            >
              <path
                d="M6 11L1 6M1 6L6 1M1 6H11.5C12.2223 6 12.9375 6.14226 13.6048 6.41866C14.272 6.69506 14.8784 7.10019 15.3891 7.61091C15.8998 8.12163 16.3049 8.72795 16.5813 9.39524C16.8577 10.0625 17 10.7777 17 11.5C17 12.2223 16.8577 12.9375 16.5813 13.6048C16.3049 14.272 15.8998 14.8784 15.3891 15.3891C14.8784 15.8998 14.272 16.3049 13.6048 16.5813C12.9375 16.8577 12.2223 17 11.5 17H8"
                stroke="#282828"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>

          <!-- Redo Button -->
          <div
            class="action-button"
            [class.disabled]="!canRedo"
            (click)="canRedo && redo()"
            [title]="canRedo ? 'Redo last action' : 'No actions to redo'"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
            >
              <path
                d="M12 11L17 6M17 6L12 1M17 6H6.5C5.04131 6 3.64236 6.57946 2.61091 7.61091C1.57946 8.64236 1 10.0413 1 11.5C1 12.2223 1.14226 12.9375 1.41866 13.6048C1.69506 14.272 2.10019 14.8784 2.61091 15.3891C3.64236 16.4205 5.04131 17 6.5 17H10"
                stroke="#282828"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>

          <div class="view-drinks-button">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="25"
              viewBox="0 0 20 25"
              fill="none"
            >
              <path
                d="M12.241 7.7446H5.4964M14.4892 12.241H5.4964M11.1169 16.7374H5.4964M1 1V23.482L3.2482 22.3579L5.4964 23.482L7.7446 22.3579L9.9928 23.482L12.241 22.3579L14.4892 23.482L16.7374 22.3579L18.9856 23.482V1L16.7374 2.1241L14.4892 1L12.241 2.1241L9.9928 1L7.7446 2.1241L5.4964 1L3.2482 2.1241L1 1Z"
                stroke="#765302"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <div class="view-drinks-text">View Drinks</div>
          </div>
        </div>
      </div>
    </div>
    } @else {
    <div class="card-content-wrapper">
      <div class="card-collapsed">
        <div class="collapsed-content">
          <div class="collapsed-left">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="25"
              viewBox="0 0 20 25"
              fill="none"
            >
              <path
                d="M12.241 7.7446H5.4964M14.4892 12.241H5.4964M11.1169 16.7374H5.4964M1 1V23.482L3.2482 22.3579L5.4964 23.482L7.7446 22.3579L9.9928 23.482L12.241 22.3579L14.4892 23.482L16.7374 22.3579L18.9856 23.482V1L16.7374 2.1241L14.4892 1L12.241 2.1241L9.9928 1L7.7446 2.1241L5.4964 1L3.2482 2.1241L1 1Z"
                stroke="#282828"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <div class="collapsed-order-number">Current Order</div>
          </div>
          <div class="collapsed-total">{{ oqv.OrderTotal | currency : 'PHP' }}</div>
        </div>
      </div>
    </div>
    }
  </div>
</div>
