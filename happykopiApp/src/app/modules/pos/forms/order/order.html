<div class="flex flex-col items-center w-full bg-[#fafafa] px-2 pb-2 box-border min-h-screen">
  <!-- Quick View Centered -->
  <app-order-quick-view class="w-full px-2 sm:px-4 my-8"></app-order-quick-view>

  <!-- Categories -->
  <div
    class="flex overflow-x-auto gap-4 w-full max-w-[1200px] px-4 py-5 bg-[#f0f0f0] box-border no-scrollbar"
  >
    <app-pos-category-off
      [categoryCard]="allDrinksCategory"
      [mode]="selectedCategory()?.id === -1 ? 'active' : 'inactive'"
      (click)="onAllDrinksClick()"
    ></app-pos-category-off>

    @for(category of categories(); track category.id) {
    <app-pos-category-off
      [categoryCard]="category"
      [mode]="selectedCategory()?.id === category.id ? 'active' : 'inactive'"
      (click)="onCategoryClick(category)"
    ></app-pos-category-off>
    }
  </div>

  <!-- Search Bar Centered -->
  <div class="w-full bg-[#f0f0f0] py-2 flex justify-center">
    <div class="w-full max-w-[480px]">
      <app-search-drink
        class="w-full"
        [allItems]="allDrinks()"
        [searchProperties]="['name', 'categoryName']"
        [placeholder]="'Search drinks...'"
        (searchResults)="onSearchResults($event)"
      ></app-search-drink>
    </div>
  </div>

  <!-- Drinks Table - 3 COLUMNS MINIMUM -->
  <div class="w-full flex justify-center px-2 py-5">
    <div class="w-full max-w-[1200px]">
      @if(drinks().length > 0) {
      <div class="grid grid-cols-3 gap-2 sm:gap-4 md:gap-6 justify-items-center">
        @for(drink of getUniqueDrinks(); track drink.id) {
        <app-order-card
          class="w-full"
          [orderCard]="drink"
          [isUnavailable]="!isProductEffectivelyAvailable(drink.id)"
          (cardClick)="onDrinkClicked(drink)"
        ></app-order-card>
        }
      </div>
      } @else {
      <!-- Empty State -->
      <div
        class="flex flex-col items-center justify-start w-full text-center min-h-[calc(100vh-300px)] pt-20 pb-10"
      >
        <h3 class="font-[Outfit] font-bold text-[#282828] text-[20px] sm:text-xl mb-3">
          Uh-oh, no drinks found!
        </h3>
        <p class="font-[Outfit] font-normal text-[#919191] text-base sm:text-sm max-w-xs">
          Try searching for something else or check another category.
        </p>
      </div>
      }
      <!-- Bottom spacer to keep white background -->
      <div class="h-32 sm:h-40 md:h-48 lg:h-56"></div>
    </div>
  </div>

  <!-- Modals -->
  @if(showModal()) {
  <div class="fixed inset-0 bg-black/50 z-[999]" (click)="closeModal()"></div>
  <div
    class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000] w-[90%] max-w-[600px] p-4 sm:p-6 rounded-lg box-border"
  >
    <app-add-order-modal
      [addOrderModal]="selectedDrink()"
      (closeModal)="onCloseModal()"
    ></app-add-order-modal>
  </div>
  } @if(showUnavailableModal()) {
  <div class="fixed inset-0 bg-black/50 z-[999]" (click)="onCloseUnavailableModal()"></div>
  <div
    class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000] w-[90%] max-w-[600px] p-4 sm:p-6 rounded-lg box-border"
  >
    <app-unavailable-product-modal
      [modalData]="selectedUnavailableProduct()!"
      (closeModal)="onCloseUnavailableModal()"
    ></app-unavailable-product-modal>
  </div>
  }
</div>
