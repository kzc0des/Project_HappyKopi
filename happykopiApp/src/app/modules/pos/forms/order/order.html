<div class="flex flex-col items-center w-full bg-[#fafafa] min-h-screen">
  <app-order-quick-view class="w-full"></app-order-quick-view>

  <!-- Categories -->
  <!-- <div class="w-full bg-[#f0f0f0] py-5">
    <div class="w-full max-w-[1200px] mx-auto px-4">
      <div class="flex overflow-x-auto gap-4 no-scrollbar">
        <app-pos-category-off
          [mode]="selectedCategory()?.id === -1 ? 'active' : 'inactive'"
          (click)="onAllDrinksClick()"
        ></app-pos-category-off>

        @for(category of categories(); track category.id) {
        <app-pos-category-off
          [categoryCard]="category"
          [mode]="selectedCategory()?.id === category.id ? 'active' : 'inactive'"
          (click)="onCategoryClick(category)"
        ></app-pos-category-off>
        }
      </div>
    </div>
  </div> -->

  <div class="
  flex items-center gap-2 py-4 px-6 
  w-full overflow-x-auto flex-nowrap">
    <app-category-card 
    class="flex-shrink-0"
    itemTitle="All Drinks" 
    [itemValue]="totalProducts"
    (click)="onAllDrinksClick()"
    [categoryId]="null"
    [selectedCategoryId]="selectedCategoryId()"></app-category-card>

    @for(category of categories(); track $index) {
    <app-category-card 
    class="flex-shrink-0"
    [itemTitle]="category.name" 
    [itemValue]="category.productCount"
    [categoryId]="category.id" 
    (click)="onCategoryClick(category.id)"
    [selectedCategoryId]="selectedCategoryId()"></app-category-card>
    }
  </div>

  <!-- Search Bar Centered -->
  <div class="
  flex items-center justify-center
  w-full py-4 px-[5vw]">
    <app-search-drink class="w-full" [searchProperties]="['name', 'categoryName']"
      [placeholder]="'Search drinks...'"></app-search-drink>
  </div>

  <!-- Drinks Grid -->
  <div class="w-full flex-1 mb-25">
    <div class="w-full max-w-[1200px] mx-auto px-4 bg-white">
      @if(drinks().length > 0) {
      <div class="grid grid-cols-3">
        @for(drink of filteredDrinks(); track $index) {
        <app-order-card [orderPayload]="drink"></app-order-card>
        }
      </div>
      } @else {
      <!-- Empty State -->
      <div class="flex flex-col items-center justify-center w-full text-center py-20">
        <h3 class="font-[Outfit] font-bold text-[#282828] text-xl mb-3">Uh-oh, no drinks found!</h3>
        <p class="font-[Outfit] font-normal text-[#919191] text-sm max-w-xs">
          Try searching for something else or check another category.
        </p>
      </div>
      }
    </div>
  </div>

  <!-- Modals -->
  @if(showModal()) {
  <div class="fixed inset-0 bg-black/50 z-[999]" (click)="closeModal()"></div>
  <div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[1000] w-[90%] max-w-[600px]">
    <app-add-order-modal [addOrderModal]="selectedDrink()" (closeModal)="onCloseModal()"></app-add-order-modal>
  </div>
  } @if(showUnavailableModal()) {
  <div class="fixed inset-0 bg-black/50 z-[999]" (click)="onCloseUnavailableModal()"></div>
  <div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[1000] w-[90%] max-w-[600px]">
    <app-unavailable-product-modal [modalData]="selectedUnavailableProduct()!"
      (closeModal)="onCloseUnavailableModal()"></app-unavailable-product-modal>
  </div>
  }
</div>