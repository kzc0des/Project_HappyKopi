@if (isIngredientOpen$ | async) {
<div class="backdrop" (click)="close()"></div>
}

<div [class.open]="isIngredientOpen$ | async" class="bg-white modal w-[80vw]
flex flex-col justify-center items-center gap-6
p-7 shadow-md rounded-lg">
    <div class="w-full items-start">
        <p class="font-semibold text-hapikopi-dark text-lg">Add an Ingredient</p>
    </div>
    <app-dropdown-button class="w-full" itemTitle="Category"
        [ngModel]="selectedCategoryId" (ngModelChange)="onCategoryChange($event)"
        [options]="categoryOptions"></app-dropdown-button>

    <app-dropdown-button class="w-full" itemTitle="Ingredient"
        [ngModel]="selectedIngredientId" (ngModelChange)="onIngredientChange($event)"
        [options]="filteredIngredientOptions" [disabled]="!selectedCategoryId">
    </app-dropdown-button>

    <app-itemcard class="w-full" [isEditing]="true" itemTitle="Measurement" type="number"
        [ngModel]="quantityNeeded" (ngModelChange)="onQuantityChange($event)">
    </app-itemcard>
        
    @if(!isEditing){
    <app-yellow-button class="w-full py-4" itemTitle="ingredient" buttonTitle="Add this Ingredient"
        [isDisabled]="!hasChanges" (isClick)="onSave()">
    </app-yellow-button>
    }@else {
    <div class="w-full flex gap-2">
        <app-red-button class="py-4 flex-1" buttonTitle="Delete" itemTitle="delete" (isClick)="onDelete()"></app-red-button>
        <app-yellow-button class="py-4 flex-1" buttonTitle="Save" itemTitle="ingredient" [isDisabled]="!hasChanges" (isClick)="onSave()"></app-yellow-button>
    </div>
    }
</div>